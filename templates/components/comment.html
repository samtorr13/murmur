<div class="space-y-4">
<form method="post" class="card bg-base-100 shadow-md" hx-post="{% url 'comment_as_view' post_id %}" hx-target="#comments-box" hx-swap="outerHTML">
                {% csrf_token %}
                <div class="card-body">
                    <h2 class="card-title">comentar</h2>
                    
                    <textarea name="content" class="textarea textarea-md textarea-bordered w-full resize-none" rows="4" placeholder="¿Qué estás pensando, {{ request.user.username }}?"></textarea>
                    <div class="flex flex-row gap-2">
                        <label class="label cursor-pointer">
                            <span class="label-text">¿Anonimo?</span> 
                            <input type="checkbox" name="anonymous" class="checkbox ml-2" />
                        </label>

                        <button type="submit" class="btn btn-primary flex-1">Comentar</button>
                    </div>
                </div>
            </form>
{% for comment in comments %}
    <div class="card bg-base-100 shadow-md">
        <div class="card-body">
            <div class="comment">
                <p><strong>{{ comment.author.username }}</strong> said:</p>
                <p>{{ comment.content }}</p>
            </div>
        </div>
    </div>
{% endfor %}
</div>

<script>
                document.body.addEventListener('htmx:configRequest', function(event) {
                    const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]')?.value;
                    if (csrfToken) {
                        event.detail.headers['X-CSRFToken'] = csrfToken;
                    }
                });
            </script>